# 5.5. Seguridad

## Módulo 01: Gestión de Usuarios
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

## Módulo 02: Visualización de Perfiles
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }


## Módulo 03: Exploración Musical
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }


## Módulo 04: Gestión de Biblioteca
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ESC-GB-09 | Seguridad | Intento de acceso no autorizado a valoraciones | Ataque externo | API de valoraciones | Producción | Bloqueo de solicitudes no autenticadas | 0% de accesos no autorizados |

### Tipo de decisión
Elección de Tecnología.

### Táctica Elegida
Backend personalizado con JWT para autenticación.

### Documentación de la Decisión (ADR)

**Título:**
- Elección del sistema de autenticación y gestión de usuarios.

**Contexto:** 
El módulo requiere un sistema robusto y seguro que permita registrar, autenticar y gestionar usuarios. Además, debe validar correos/nicknames, manejar distintos tipos de cuenta (gratuita/premium) y garantizar la protección de los datos personales, alineándose con la decisión general de utilizar PostgreSQL como base de datos relacional.

**Alternativas:**
1. **Firebase Authentication + Firestore:**
    - Plataforma de Google que ofrece autenticación segura y una base de datos NoSQL en tiempo real.
    - Integración sencilla con formularios, validación de emails y almacenamiento de usuarios.
    - Soporte para autenticación con correo/contraseña, OAuth (Google, Facebook, etc.) y más.
    - Desventaja: Introduce una base de datos NoSQL adicional (Firestore) que no se alinea con la decisión general de usar principalmente PostgreSQL para datos relacionales.

2. **Backend personalizado (Node.js + Express + JWT + PostgreSQL):**
    - Desarrollo completo del sistema de autenticación y gestión de usuarios desde cero, utilizando las tecnologías backend y de base de datos elegidas para el resto de la aplicación.
    - Control total sobre la lógica de validación, estructura de base de datos y seguridad, asegurando la coherencia tecnológica.
    - Requiere mayor tiempo de desarrollo inicial y mantenimiento, pero ofrece una integración más homogénea con el resto del sistema.
     
**Criterios de elección:**
- **Coherencia Tecnológica:** Priorizar el uso de las tecnologías elegidas a nivel general (Node.js, Express, PostgreSQL) para facilitar la integración, el mantenimiento y la gestión de la infraestructura.
- **Mantenibilidad:** Asegurar un sistema de autenticación robusto y la protección de los datos de los usuarios.
- **Tiempo de implementación:** Tener control total sobre el esquema de la base de datos de usuarios y la lógica de autenticación.
- **Costo:** Diseñar una solución que pueda escalarse a medida que la base de usuarios crezca.

**Decisión:**
Backend personalizado (Node.js + Express + JWT + PostgreSQL)

**Sustento:**
Se elige desarrollar un backend personalizado para la gestión de usuarios y la autenticación utilizando Node.js con Express.js para la lógica del servidor, JWT (JSON Web Tokens) para la autenticación basada en tokens y PostgreSQL para el almacenamiento de la información de los usuarios y los planes de suscripción. Esta decisión se toma para mantener la coherencia con la arquitectura general, facilitando la integración con otros módulos que también utilizarán PostgreSQL. Aunque requiere una mayor inversión inicial en desarrollo, ofrece un control total sobre la seguridad y la estructura de los datos, además de simplificar la gestión de la infraestructura a largo plazo al centralizar el uso de la base de datos relacional elegida.

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ESC-GB-10 | Seguridad | Fuga potencial de datos de biblioteca | Auditoría interna | Base de datos MongoDB | Operación normal | Protección de datos sensibles | Cumplimiento 100% RGPD |

### Tipo de decisión
Modelo de datos.

### Táctica Elegida
Encriptación de datos sensibles.

### Documentación de la Decisión (ADR)

**Título:**  
Protección de datos personales en la biblioteca musical.

**Contexto:**  
La biblioteca contiene información sensible sobre preferencias musicales que debe protegerse según regulaciones de privacidad.

**Alternativas:**
1. **Encriptación a nivel aplicación:**
    - Encriptar/desencriptar en el código.
    - Control total pero complejidad añadida.

2. **Encriptación nativa de MongoDB:**
    - Transparente para la aplicación.
    - Rendimiento optimizado.

**Criterios de elección:**
- Cumplimiento normativo.
- Impacto en rendimiento.
- Gestiones claves.
- Recuperación de datos.

**Decisión:**
Encriptación nativa de MongoDB.

**Sustento:**
La solución aprovecha MongoDB Enterprise (decisión 4.11) con: 1) Encriptación AES-256 para datos sensibles, 2) Rotación automática de claves, y 3) Registro de accesos. Esto cumple con regulaciones sin modificar la lógica de aplicación, manteniendo un overhead de rendimiento medido del 12%. Los backups en PostgreSQL (decisión General.9) complementan la estrategia de protección.

## Módulo 05: Gestión de Recomendaciones
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }


## Módulo 06: Gestión de Planes y Monetización
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }
