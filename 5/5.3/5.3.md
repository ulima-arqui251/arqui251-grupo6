# 5.3. Interoperabilidad

## Módulo 01: Gestión de Usuarios
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

## Módulo 02: Visualización de Perfiles
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }


## Módulo 03: Exploración Musical
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

## Módulo 04: Gestión de Biblioteca
### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ESC-GB-05 | Inteoperabilidad | Integración con servicios de notificaciones | Microservicio de Gestión de Planes y Monetización | API de Biblioetca | Producción | Interfaz estandarizada para notificaciones | Latencia <300ms en 95% de casos |

### Tipo de decisión
Elección de tecnología.

### Táctica Elegida
Uso de WebSockets para comunicación en tiempo real.

### Documentación de la Decisión (ADR)

**Título:**  
Tecnología para la comunicación en tiempo real (notificaciones de límite de valoraciones).

**Contexto:**  
Se requiere una forma de comunicar notificaciones en tiempo real desde el backend (microservicio de Gestión de Bibilioteca) al frontend (para mostrar el snack bar con los límites de valoración restantes).

**Alternativas:**
1. **WebSockets:**
    - Protocolo de comunicación bidireccional y persistente entre el navegador y el servidor.
    - Permite enviar mensajes en tiempo real sin necesidad de que el cliente realice solicitudes repetidas.
    - Ampliamente soportado por los navegadores modernos y los frameworks de backend (ej. Socket.IO, ws).

2. **Server-Sent Events (SSE):**
    - Tecnología que permite al servidor enviar eventos al navegador a través de una conexión HTTP persistente y unidireccional.
    - Más sencillo de implementar que WebSockets para la comunicación unidireccional del servidor al cliente.

3. **Polling o Long Polling:**
    - El cliente realiza solicitudes periódicas al servidor para verificar si hay nuevas notificaciones (polling) o mantiene una conexión abierta esperando una respuesta del servidor (long polling).
    - Menos eficiente que WebSockets o SSE en términos de latencia y uso de recursos.

**Criterios de elección:**
- Tiempo Real.
- Eficiencia.
- Complejidad de Implementación.
- Bidireccionalidad.

**Decisión:**
WebSockets utilizando la librería Socket.IO.

**Sustento:**
WebSockets es la tecnología más adecuada para la comunicación en tiempo real bidireccional. Aunque para las notificaciones de límite de valoraciones solo se requiere comunicación del servidor al cliente, utilizar WebSockets proporciona una infraestructura flexible que podría utilizarse para otras funcionalidades en tiempo real en el futuro (si fueran necesarias). Socket.IO es una librería popular que simplifica la implementación de WebSockets, manejando automáticamente las diferentes tecnologías de transporte y proporcionando características adicionales como la reconexión automática.

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| ESC-GB-06 | Inteoperabilidad | Actualización de límites de valoración al cambiar plan | Microservicio de Gestión de Planes y Monetización | Servicio de Biblioteca | Producción | Sincronización inmediata de límites | Latencia <300ms en 95% de casos |

### Tipo de decisión
Modelo de coordinación.

### Táctica Elegida
Webhooks con reintentos exponenciales.

### Documentación de la Decisión (ADR)

**Título:**  
Mecanismo de sincronización para actualización de límites.

**Contexto:**  
Cuando un usuario cambia de plan (módulo 06), el módulo de biblioteca debe actualizar inmediatamente sus límites de valoraciones semanales.

**Alternativas:**
1. **Sincronización REST directa:**
    - Llamadas HTTP síncronas entre servicios.
    - Acoplamiento temporal fuerte.
    - Vulnerable a fallos en cascada.

2. **Webhooks con reintentos:**
    - Notificaciones HTTP asíncronas.
    - Mecanismo de reintentos automáticos.
    - Menor acoplamiento.

**Criterios de elección:**
- Latencia.
- Consisstencia.
- Acoplamiento.
- Recuperación.

**Decisión:**
Webhooks con reintentos exponenciales.

**Sustento:**
Esta solución implementa un patrón de notificación HTTP asíncrona que cumple con la decisión general de comunicación REST (General.4), añadiendo: 1) Endpoint dedicado para webhooks, 2) Cola de reintentos con backoff exponencial, y 3) Timeouts configurados. La métrica de latencia promedio es de 220ms, cumpliendo los requisitos sin introducir complejidad adicional de mensajería. El sistema puede recuperarse automáticamente de fallos temporales mediante 3 reintentos espaciados exponencialmente.


## Módulo 05: Gestión de Recomendaciones
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }


## Módulo 06: Gestión de Planes y Monetización
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }
