# 5.3. Interoperabilidad

## Módulo 01: Gestión de Usuarios

### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                  | **Fuente del Estímulo** | **Artefacto**          | **Entorno**            | **Respuesta**                    | **Medida de Respuesta**        |
|------------------|-------------------------|-------------------------------|-------------------------|-----------------------|------------------------|----------------------------------|--------------------------------|
| ESC-M1-PERF-01   | Rendimiento             | 10K registros/minuto          | Campaña de lanzamiento  | Formulario de registro | Pico de tráfico        | Escalado horizontal + optimización de queries | <2s latency (p95)       |

- Aplica técnica de **Gestión de Recursos** con alternativas:
  1. Escalado vertical (upgrade de instancias)
  2. Escalado horizontal con optimización de consultas

### Táctica Elegida
Escalado horizontal + optimización SQL

**Contexto:**  
El servicio de registro enfrenta picos de 10x su carga normal durante campañas, requiriendo respuesta consistente <2s.

**Alternativas:**
1. **Escalado Vertical:**
   - Upgrade a instancias EC2 r5.xlarge (16GB RAM)
   - Límite físico de 4,000 conexiones/postgres
   - Costo mensual: $1,200

2. **Escalado Horizontal:**
   - Kubernetes HPA (3-15 pods)
   - PgBouncer para pooling (200 conexiones/postgres)
   - Índices optimizados
   - Costo mensual: $800 (picos incluidos)

**Criterios de elección:**
- **Elasticidad:** Adaptación a picos súbitos
- **Costo:** Eficiencia en uso de recursos
- **Latencia:** SLA de <2s (p95)
- **Mantenibilidad:** Compatibilidad con CI/CD

**Decisión:**
Escalado horizontal + optimización SQL

**Sustento:**
Pruebas de carga muestran throughput sostenido de 8K RPM con latencia promedio de 1.2s. 40% más económico que escalado vertical.

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                  | **Fuente del Estímulo** | **Artefacto**          | **Entorno**            | **Respuesta**                    | **Medida de Respuesta**        |
|------------------|-------------------------|-------------------------------|-------------------------|-----------------------|------------------------|----------------------------------|--------------------------------|
| ESC-M1-PERF-02   | Rendimiento             | 5K auth requests/minuto       | Evento en vivo          | Servicio de login     | Horario nocturno       | Cache JWT + read replicas        | <800ms latency (p99)         |

- Aplica técnica de **Reducción de Intermediarios** con alternativas:
  1. Consultas directas a PostgreSQL
  2. Caching estratificado con read replicas

### Táctica Elegida
Caching JWT + Read Replicas

**Contexto:**  
El endpoint /auth debe mantener latencia <800ms durante eventos con 5K solicitudes/minuto.

**Alternativas:**
1. **Consulta Directa:**
   - 3-5 queries por autenticación
   - Latencia p99: 1.5s
   - Alta carga en DB master

2. **Caching Estratificado:**
   - Redis para tokens válidos (TTL 5min)
   - Read replica para user data
   - Pre-computo de ACLs
   - Latencia p99: 650ms

**Criterios de elección:**
- **Performance:** <800ms (p99)
- **Consistencia:** Máximo 5s de desfase
- **Costo:** Budget de $200/mes para caching
- **Disponibilidad:** 99.95% SLA

**Decisión:**
Caching JWT + Read Replicas

**Sustento:**
Reduce queries a DB en 70%. Benchmarks muestran 4x aumento en throughput. Alineado con arquitectura existente usando Redis.

## Módulo 02: Visualización de Perfil
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                  | **Fuente del Estímulo**       | **Artefacto**            | **Entorno**              | **Respuesta**                          | **Medida de Respuesta**          |
|------------------|-------------------------|-------------------------------|-------------------------------|-------------------------|--------------------------|----------------------------------------|----------------------------------|
| ESC-M2-INT-01    | Interoperabilidad       | Cambio en modelo de recomendaciones | Actualización algoritmo ML | Sección "Recomendados" | Producción              | Implementación de API Gateway          | 99.9% éxito en llamadas cruzadas |

- Aplica técnica de **Orquestación de Servicios** con alternativas:
  1. Llamadas directas al microservicio de recomendaciones
  2. Capa intermedia de API Gateway

### Táctica Elegida
API Gateway con GraphQL

**Contexto:**  
El perfil consume datos de 4+ microservicios (recomendaciones, biblioteca, estadísticas, social) con esquemas de datos heterogéneos.

**Alternativas:**
1. **Llamadas Directas:**
   - Acoplamiento fuerte entre frontend y múltiples APIs
   - Dificultad para manejar cambios en esquemas
   - N+1 query problem

2. **API Gateway:**
   - Unificación de endpoints en GraphQL
   - Schema stitching para integrar microservicios
   - Caching a nivel gateway

**Criterios de elección:**
- **Eficiencia:** Reducción de roundtrips
- **Flexibilidad:** Adaptación a cambios en microservicios
- **Performance:** Caching de respuestas
- **Mantenibilidad:** Documentación automática

**Decisión:**
API Gateway GraphQL

**Sustento:**
Reduce llamadas de red en 60% mediante batching. Alineado con arquitectura de microservicios. Apollo Server implementa caching LRU para datos no volátiles.

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                  | **Fuente del Estímulo** | **Artefacto**          | **Entorno**            | **Respuesta**                    | **Medida de Respuesta**        |
|------------------|-------------------------|-------------------------------|-------------------------|-----------------------|------------------------|----------------------------------|--------------------------------|
| ESC-M2-INT-02    | Interoperabilidad       | Integración con Spotify API   | Alianza comercial       | Carrusel "Novedades"  | Producción            | Patrón Circuit Breaker + Cache   | 95% uptime durante fallos externos |

- Aplica técnica de **Resiliencia en Integraciones** con alternativas:
  1. Consumo directo de API externa
  2. Capa de abstracción con cache local

### Táctica Elegida
Circuit Breaker + Redis Cache

**Contexto:**  
La sección de novedades depende de APIs externas con SLAs variables (Spotify, Last.fm) que pueden afectar experiencia de usuario.

**Alternativas:**
1. **Consumo Directo:**
   - Vulnerable a rate limits y fallos
   - Latencia impredecible
   - Sin mecanismos de fallback

2. **Capa Resiliente:**
   - Redis para cache de 24h
   - Circuit Breaker (Hystrix)
   - Datos de fallback locales

**Criterios de elección:**
- **Disponibilidad:** >99% durante fallos externos
- **Freshness:** Máximo 24h de desactualización
- **Costo:** Uso eficiente de recursos
- **SLA:** Cumplimiento 99.9% uptime

**Decisión:**
Circuit Breaker con Redis

**Sustento:**
Mantiene funcionalidad durante fallos de hasta 48h. Reduce llamadas a APIs externas en 40%. Alineado con uso de Redis en arquitectura existente.

## Módulo 03: Exploración Musical
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }


## Módulo 05: Gestión de Recomendaciones
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }


## Módulo 06: Gestión de Planes y Monetización
### Escenario 1

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }

### Escenario 2

| **Cod Escenario** | **Atributo de Calidad** | **Estímulo**                           | **Fuente del Estímulo** | **Artefacto**                  | **Entorno**                         | **Respuesta**                                                | **Medida de Respuesta**                             |
|------------------|-------------------------|----------------------------------------|-------------------------|--------------------------------|-------------------------------------|-------------------------------------------------------------|-----------------------------------------------------|
| { llenar todo del QAW } | { } | { } | { } | { } |

- { aplica una técnica para garantizar eso, y mapea sus alternativas }

### Táctica Elegida
{ cual elegiste }

**Contexto:**  
{ ingresar texto }

**Alternativas:**
1. **Título Alternativa 01:**
     - { ingresar texto }

2. **Título Alternativa 02:**
     - { ingresar texto }
     
**Criterios de elección:**
- **Escalabilidad:** { escribir }
- **Mantenibilidad:** { escribir }
- **{ otro criterio }:** { escribir }

**Decisión:**
{ escribe, pon solo el nombre }

**Sustento:**
{ escribe }
