# 3.5. Refinamiento de Escenarios
Con los escenarios ya priorizados, se listaron y le dimos una especificación mayor para aplicar en el futuro. El desarrollo fue el siguiente.

| ID       | Atributo de Calidad       | Fuente Estímulo          | Estímulo                                                                 | Artefacto Tecnológico                          | Entorno      | Respuesta del Sistema                                                                 | Medida de Respuesta                                                                 |
|----------|---------------------------|--------------------------|--------------------------------------------------------------------------|------------------------------------------------|--------------|---------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| **ESC-24** | Operabilidad              | Usuario                  | Click en botón "Añadir a biblioteca" tras seleccionar álbum              | Componente React con Framer Motion             | Producción   | Cambio visual instantáneo: "Añadir" → "✓ Añadido" (botón deshabilitado)               | Feedback en ≤500ms (P95 en Chrome DevTools)                                        |
| **ESC-01** | Consistencia              | Usuario nuevo            | Intento de registro con email existente                                  | Formulario con Zod + React Hook Form           | Producción   | Mensaje de error contextual bajo campo email                                           | 95% usuarios corrigen en ≤2 intentos (Google Analytics)                           |
| **ESC-06** | Tolerancia a Errores      | Usuario móvil            | Pérdida de conexión durante valoración                                   | Redux Offline + IndexedDB                      | Producción   | Notificación persistente "Guardado localmente. Sincronizando..."                      | 100% datos recuperados post-reconexión (test E2E)                                  |
| **ESC-11** | Integridad                | Usuario experto          | Búsqueda con 3 filtros (género, año, rating)                             | API GraphQL con validación Joi                 | Producción   | Resultados paginados (20 items/página)                                                | 99% precisión vs base de datos (1,000 casos de prueba)                             |
| **ESC-04** | Eficiencia                | Sistema                  | 15 registros simultáneos                                                 | Node.js + PostgreSQL (pool: 15 conexiones)     | Producción   | Tiempo respuesta promedio: 1.2s                                                       | 95% requests <1.5s (k6 con 100 VUs)                                                |
| **ESC-05** | Modularidad               | Equipo desarrollo        | Cambio estructura datos usuario                                          | Sequelize + migraciones                        | Desarrollo   | Actualización sin breaking changes                                                    | 0 errores en pruebas de integración (Jest)                                         |
| **ESC-13** | Eficiencia                | API externa              | Fallo servicio géneros musicales                                         | Redis Cache (TTL 1h)                           | Producción   | Respuesta con datos cacheados + timestamp                                             | 70% reducción llamadas fallidas (Prometheus)                                       |
| **ESC-21** | Tolerancia                | Usuario rural            | Error de red persistente                                                 | BullMQ + reintentos exponenciales              | Producción   | Notificación "Reintentando (2/5)..." cada 2min                                        | 100% operaciones completadas (máx 24h)                                             |
| **ESC-26** | Rendimiento               | Usuario premium          | Scroll rápido en biblioteca (500+ álbumes)                               | React Window + virtualization                  | Producción   | Scroll fluido a 60fps                                                                 | CLS <0.1 (Lighthouse)                                                              |
| **ESC-02** | Seguridad                 | Sistema                  | 5 intentos fallidos de login                                             | Express-rate-limit + Winston logs              | Producción   | Bloqueo temporal (10min) + alerta equipo                                              | 100% ataques bloqueados (SIEM Elastic)                                             |
| **ESC-03** | Operabilidad              | Usuario senior           | Cambio contraseña (flujo complejo)                                       | Formik + Yup                                   | Producción   | Confirmación visual + cierre automático modal                                         | 97% completan flujo en <30s (Hotjar)                                               |
| **ESC-07** | Exactitud                 | Crítico musical          | Envío valoración 95.6/100                                                | PostgreSQL DECIMAL(5,2)                        | Producción   | Almacenamiento preciso sin redondeo                                                   | 0 discrepancias en 10K tests (pgTAP)                                               |
| **ESC-10** | Control de Auditoría      | Bot malicioso            | 100+ POST /contact en 30s                                                | express-brute + Redis                          | Producción   | Bloqueo IP (HTTP 429) + registro detallado                                            | 100% spam prevenido (Kibana)                                                       |
| **ESC-25** | Control de Acceso         | Usuario no autorizado    | DELETE /album/123 sin JWT válido                                         | Casbin RBAC                                    | Producción   | HTTP 403 + log auditoría                                                              | 0 accesos no autorizados (OWASP ZAP)                                               |
| **ESC-27** | Consistencia              | Usuario premium          | GET /recommendations con 50 ratings                                      | Algoritmo colaborativo (Pearson r>0.8)         | Producción   | 1 artista + 3 álbumes relevantes                                                      | 80% aceptación (A/B testing)                                                       |
| **ESC-16** | Comunicación              | Usuario discapacidad     | Navegación por teclado                                                   | Componentes con aria-labels                    | Producción   | Focus visible en elementos interactivos                                               | 100% WCAG 2.1 AA (axe-core)                                                        |
| **ESC-09** | Estandarización           | Usuario Google           | "Login with Google"                                                      | Passport.js + OAuth 2.0                        | Producción   | Token JWT en 1s ±200ms                                                                | 100% logins exitosos (100 usuarios testeado)                                       |
| **ESC-12** | Operabilidad              | Usuario apresurado       | Búsqueda "pink floid"                                                    | Algoritmo Levenshtein (distancia 1)            | Producción   | Sugerencia "¿Quisiste decir: Pink Floyd?"                                             | 90% correcciones aceptadas (Mixpanel)                                              |
| **ESC-14** | Robustez                  | Usuario impaciente       | 3 clicks rápidos en "Buscar"                                             | lodash.throttle (300ms)                        | Producción   | Unificación en 1 request                                                              | 0 requests duplicadas (Redux DevTools)                                             |
| **ESC-17** | Modularidad               | Dev junior               | Nuevo filtro "década=2000"                                               | Migraciones Sequelize                          | Desarrollo   | Deploy sin downtime                                                                   | 100% disponibilidad (New Relic)                                                    |
| **ESC-18** | Consistencia              | QA tester                | Acceso /profile en Firefox                                               | Normalize.css + autoprefixer                   | Producción   | Estilos idénticos Chrome/Edge                                                         | 100% match (Percy.io)                                                              |
| **ESC-19** | Independencia             | DevOps                   | Actualización React 17 → 18                                              | CI/CD pipeline                                 | Desarrollo   | Build exitoso con StrictMode                                                          | 0 warnings (eslint-plugin-react)                                                   |
| **ESC-20** | Exactitud                 | Usuario detallista       | GET /album/456 sin tracks                                                | PropTypes + validación                         | Producción   | Mensaje descriptivo                                                                   | 100% claridad (tests usabilidad)                                                   |
| **ESC-22** | Estandarización           | Equipo backend           | Migración LastFM → Spotify                                               | Adapter Pattern                                | Desarrollo   | Todos endpoints funcionando                                                           | 100% cobertura (Postman)                                                           |
| **ESC-23** | Trazabilidad              | Admin                    | PATCH /rating/789                                                        | Triggers PostgreSQL + audit-table              | Producción   | Log con [timestamp, admin_id, old_value, new_value]                                   | 100% cambios auditables (pgAudit)                                                  |
| **ESC-28** | Robustez                  | Script automático        | 100 GET /recommend en 10min                                              | express-brute + Redis                          | Producción   | Limite 3 requests/minuto                                                              | 100% limitación efectiva (JMeter)                                                  |
| **ESC-08** | Trazabilidad              | Usuario arrepentido      | DELETE /account                                                          | Logs estructurados (JSON)                      | Producción   | Registro con {timestamp, user_id, email, reason}                                      | 100% compliance GDPR (ELK Stack)                                                   |
| **ESC-15** | Simplicidad               | CI/CD Pipeline           | Push con coverage <90%                                                   | Jest + GitHub Actions                          | Desarrollo   | Fail build + reporte                                                                  | 100% branches testeadas (Codecov)                                                  |
| **ESC-29** | Trazabilidad              | Usuario premium          | GET /billing/history                                                     | Sequelize + fast-csv                           | Producción   | CSV con [date, amount, plan, transaction_id]                                          | 100% datos exportables (Excel)                                                     |
| **ESC-30** | Estandarización           | Usuario empresarial      | POST /invoice                                                            | pdfkit + templates E.407                       | Producción   | PDF/A-1b legible                                                                      | 100% documentos válidos (PDFtk)                                                    |