# 3.3. Consolidación de Escenarios
- [Volver al índice](/3/3.md)

La consolidación de escenarios se realizó mediante un proceso iterativo de refinamiento basado en el framework SQUARE (Systematic Quality Requirements Engineering), fusionando los 60 escenarios preliminares en 30 escenarios canónicos que abarcan los atributos de calidad críticos. El desarrollo fue el siguiente.

| ID      | Atributo de Calidad       | Estímulo                              | Respuesta                                      | ID Escenario Preliminar | Sustento                     | Comentarios                     |
|---------|---------------------------|---------------------------------------|-----------------------------------------------|-------------------------|------------------------------|---------------------------------|
| ESC-01  | Consistencia              | Registro con datos completos          | Error claro sin recargar página               | ESCP-01, ESCP-07        | Validación en frontend/backend | Core del sistema               |
| ESC-02  | Control de Acceso         | 3 intentos fallidos de login          | Bloqueo por 5 min + logs                     | ESCP-02, ESCP-13        | OWASP Top 10                 | Registrar IP y timestamp       |
| ESC-03  | Operabilidad              | Flujo "Recuperar contraseña"          | Email con enlace (1h validez)                | ESCP-03                 | UX crítica                   | SMTP universitario para pruebas |
| ESC-04  | Eficiencia de Ejecución   | 20 usuarios registrándose             | Respuesta <2s                                | ESCP-04                 | Transacciones SQLite         | Pool de conexiones             |
| ESC-05  | Modularidad               | Cambiar campos de registro            | Modificar solo User.model                    | ESCP-05, ESCP-18        | Arquitectura flexible        | Centralizado en 1 archivo      |
| ESC-06  | Tolerancia a Errores      | Internet cae durante registro         | Guarda en LocalStorage                       | ESCP-06, ESCP-36        | Resiliencia offline          | Sincroniza al reconectar       |
| ESC-07  | Exactitud                 | Valoración 95.6/100                   | Guarda puntaje exacto                        | ESCP-35                 | Precisión en ratings         | Tipo DECIMAL(5,2) en BD        |
| ESC-08  | Trazabilidad              | Eliminación de cuenta                 | Log con userID + timestamp                   | ESCP-08, ESCP-37        | Cumplimiento legal           | Tabla auditoría                |
| ESC-09  | Estandarización           | Login con Google                      | OAuth 2.0 + JWT                             | ESCP-09                 | Interoperabilidad            | Librería Passport.js           |
| ESC-10  | Control de Auditoría      | Spam de formularios                   | Limita 5 requests/min                        | ESCP-10, ESCP-48        | Prevención de ataques        | Middleware de rate-limiting    |
| ESC-11  | Integridad                | Búsqueda con filtros                  | Resultados precisos                          | ESCP-21                 | Validación backend           | Índices FULLTEXT               |
| ESC-12  | Operabilidad              | Búsqueda con typo                     | Sugerir corrección                           | ESCP-22                 | Mejora UX                    | Algoritmo Levenshtein          |
| ESC-13  | Eficiencia de Almacenamiento | API musical no responde           | Cache local (1h)                             | ESCP-26, ESCP-46        | Resiliencia                  | Redis o localStorage           |
| ESC-14  | Robustez                  | Click repetido en "Buscar"            | Descarta duplicados                          | ESCP-28                 | Optimización                 | Debounce 300ms                 |
| ESC-15  | Simplicidad               | Pruebas de estadísticas              | 90% cobertura con Jest                       | ESCP-16, ESCP-39        | Calidad                      | Mockear API con MSW            |
| ESC-16  | Comunicación              | Navegación por teclado               | Focus visible                                | ESCP-17, ESCP-40        | Accesibilidad                | ARIA + tabindex                |
| ESC-17  | Modularidad               | Añadir filtro por década             | Extender schema sin romper BD                | ESCP-29                 | Evolución                    | Migraciones SQL                |
| ESC-18  | Consistencia              | Visualización en navegadores         | Mismo diseño en Chrome/Firefox               | ESCP-19                 | Cross-browser                | Testing con BrowserStack       |
| ESC-19  | Independencia de Hardware | Migrar a React 19.1                    | Funcionalidad intacta                        | ESCP-20                 | Portabilidad                 | Polyfills para compatibilidad  |
| ESC-20  | Exactitud                 | Álbum sin canciones                  | Mensaje descriptivo                          | ESCP-25                 | Validación de datos          | JOIN con tabla canciones       |
| ESC-21  | Tolerancia a Errores      | Error en valoración                  | Guarda borrador local                        | ESCP-36                 | Resiliencia                  | Cola de sincronización         |
| ESC-22  | Estandarización           | Cambio de API musical               | Actualizar solo MusicService                 | ESCP-27, ESCP-47        | Patrón Adapter               | Mock para pruebas              |
| ESC-23  | Trazabilidad              | Modificación de rating               | Registra userID + fecha                      | ESCP-37                 | Auditoría                    | Trigger en BD                  |
| ESC-24  | Operabilidad              | Añadir álbum a biblioteca           | Animación de confirmación                    | ESCP-32                 | Feedback visual              | CSS transitions                |
| ESC-25  | Control de Acceso         | Eliminar álbum ajeno                | Error 403                                    | ESCP-33                 | Seguridad                    | Middleware de permisos         |
| ESC-26  | Eficiencia de Ejecución   | Biblioteca con 500+ álbumes         | Virtual scrolling                            | ESCP-34                 | Rendimiento                  | react-window                   |
| ESC-27  | Consistencia              | Recomendaciones premium              | 1 artista + 3 álbumes basados en historial   | ESCP-41, ESCP-45        | ML básico                    | Modelo por género + rating     |
| ESC-28  | Robustez                  | Spam en "Recomendar"                | Limita 3/minuto                              | ESCP-48                 | Prevención                   | Rate limiting                  |
| ESC-29  | Trazabilidad              | Historial de pagos                  | Exportar a CSV                               | ESCP-57                 | Legalidad                    | Cumplir normativas             |
| ESC-30  | Estandarización           | Factura premium                     | Genera PDF estándar                          | ESCP-60                 | Formato universal            | Librería PDFKit                |